@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@base <http://example.com/base/> .

<#TriplesMap1>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "person"];
	
    rr:subjectMap [ rr:template "http://example.com/resource/person_{idperson}";
    rr:class rdf:Person;
 ]; 
	
    rr:predicateObjectMap
    [ 
	   rr:predicate	rdf:type_P ; 
         rr:objectMap	[ 
           a rr:RefObjectMap ;
           rr:parentTriplesMap <#TriplesMap4>;
           rr:joinCondition [
				rr:child "type_P" ;
				rr:parent "idtype_person" ;
		  ]
    ];
    ];

   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:name ; 
		rr:objectMap	[ rr:column "name"; ];
    ];
.

<#TriplesMap2>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "tweet" ];
	
    rr:subjectMap [ rr:template "http://example.com/resource/tweet_{idtweet}";
    rr:class rdf:Tweet;
 ]; 
	
    rr:predicateObjectMap
    [ 
	   rr:predicate	rdf:type_T ; 
         rr:objectMap	[ 
           a rr:RefObjectMap ;
           rr:parentTriplesMap <#TriplesMap5>;
           rr:joinCondition [
				rr:child "type_T" ;
				rr:parent "idtype_tweet" ;
		  ]
    ];
    ];


   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:time ; 
		rr:objectMap	[ rr:column "time"; ];
    ];

   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:hastext ; 
		rr:objectMap	[ rr:column "hastext"; ];
    ];
    .


<#TriplesMap3>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "emotion" ];
	
    rr:subjectMap [ rr:template "http://example.com/resource/emotion_{idemotion}";
    rr:class rdf:Emotion;
 ]; 

   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:sentiment ; 
		rr:objectMap	[ rr:column "sentiment"; ];
    ];
    .


<#TriplesMap4>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "type_person" ];
	
    rr:subjectMap [ rr:template "http://example.com/resource/PersonType_{idtype_person}";
    rr:class rdf:PersonT;
 ]; 
    .


<#TriplesMap5>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "type_tweet" ];
	
    rr:subjectMap [ rr:template "http://example.com/resource/TweetType_{idtype_tweet}";
   rr:class rdf:TweetT;
 ]; 
    .


<#TriplesMap6>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "references" ];
	
    rr:subjectMap [ rr:template "http://example.com/resource/tweet_{idtweet}"; 
 rr:class rdf:References;

]; 

   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:references ; 
		rr:objectMap	[ rr:template "http://example.com/resource/person_{idperson}"; ];
    ];
    .

<#TriplesMap7>
    a rr:TriplesMap;
        
	rr:logicalTable [ rr:tableName  "hasemotion" ];
	
    rr:subjectMap [  rr:template "http://example.com/resource/tweet_{idtweet}";
    rr:class rdf:HasEMotion;
 ]; 

   rr:predicateObjectMap
    [ 
		rr:predicate	rdf:hasEmotion ; 
		rr:objectMap	[ rr:template "http://example.com/resource/emotion_{idemotion}"; ];
    ];
    .


<#TriplesMap8>
    a rr:TriplesMap;
    
    rr:logicalTable [
        rr:sqlQuery """
            SELECT person.idperson AS idperson,
                   tweet.idtweet As idtweet
            FROM person
            JOIN tweet
            ON person.idperson = tweet.p_id
        """;
    ];
    
    rr:subjectMap [
        rr:template "http://example.com/resource/person_{idperson}";
    ];
    
    rr:predicateObjectMap [
        rr:predicate rdf:tweeted;
        rr:objectMap [
            rr:template "http://example.com/resource/tweet_{idtweet}";
        ];
    ];
.


